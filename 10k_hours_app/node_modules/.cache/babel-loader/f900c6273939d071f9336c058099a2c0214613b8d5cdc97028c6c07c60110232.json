{"ast":null,"code":"var _jsxFileName = \"/Users/handsomeboy/Documents/playplay/10k_hours/10k_hours_app/src/components/SkillProgress.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useEffect, useRef } from 'react';\nimport { Chart, registerables } from 'chart.js';\nimport { ResponsiveContainer } from 'recharts';\nimport SkillContext from '../contexts/SkillContext';\nimport './SkillProgress.css';\n\n// 注册所有必要的组件\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChart.register(...registerables);\nconst SkillProgress = () => {\n  _s();\n  const {\n    skills,\n    getSkillProgress\n  } = useContext(SkillContext);\n  const pieChartRef = useRef(null);\n  const barChartRef = useRef(null);\n  const pieChartInstance = useRef(null);\n  const barChartInstance = useRef(null);\n\n  // 销毁旧图表实例\n  const destroyCharts = () => {\n    if (pieChartInstance.current) {\n      pieChartInstance.current.destroy();\n      pieChartInstance.current = null;\n    }\n    if (barChartInstance.current) {\n      barChartInstance.current.destroy();\n      barChartInstance.current = null;\n    }\n  };\n\n  // 创建或更新图表\n  useEffect(() => {\n    // 销毁旧图表\n    destroyCharts();\n    if (skills.length === 0) return;\n\n    // 创建饼图数据\n    const pieData = {\n      labels: skills.map(skill => skill.name),\n      datasets: [{\n        data: skills.map(skill => skill.hoursPracticed),\n        backgroundColor: ['#61dafb', '#21a1f1', '#7b1fa2', '#e1bee7', '#388e3c', '#c8e6c9', '#ff6f00', '#ffecb3'],\n        borderWidth: 1\n      }]\n    };\n\n    // 创建饼图\n    if (pieChartRef.current) {\n      pieChartInstance.current = new Chart(pieChartRef.current, {\n        type: 'pie',\n        data: pieData,\n        options: {\n          responsive: true,\n          plugins: {\n            legend: {\n              position: 'right'\n            },\n            title: {\n              display: true,\n              text: '技能练习时间分布'\n            }\n          }\n        }\n      });\n    }\n\n    // 创建柱状图数据\n    const barData = {\n      labels: skills.map(skill => skill.name),\n      datasets: [{\n        label: '已练习小时数',\n        data: skills.map(skill => skill.hoursPracticed),\n        backgroundColor: '#61dafb',\n        borderWidth: 1\n      }, {\n        label: '目标小时数',\n        data: skills.map(skill => skill.targetHours),\n        backgroundColor: '#e0e0e0',\n        borderWidth: 1,\n        type: 'bar',\n        order: 2\n      }]\n    };\n\n    // 创建柱状图\n    if (barChartRef.current) {\n      barChartInstance.current = new Chart(barChartRef.current, {\n        type: 'bar',\n        data: barData,\n        options: {\n          responsive: true,\n          scales: {\n            y: {\n              beginAtZero: true,\n              title: {\n                display: true,\n                text: '小时数'\n              }\n            },\n            x: {\n              title: {\n                display: true,\n                text: '技能'\n              }\n            }\n          },\n          plugins: {\n            title: {\n              display: true,\n              text: '技能进度对比'\n            }\n          }\n        }\n      });\n    }\n\n    // 组件卸载时销毁图表\n    return () => destroyCharts();\n  }, [skills, getSkillProgress]);\n  if (skills.length === 0) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"skill-progress empty\",\n      children: /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"\\u6682\\u65E0\\u6280\\u80FD\\u6570\\u636E\\uFF0C\\u6DFB\\u52A0\\u6280\\u80FD\\u5E76\\u8BB0\\u5F55\\u7EC3\\u4E60\\u65F6\\u95F4\\u540E\\u5373\\u53EF\\u67E5\\u770B\\u56FE\\u8868\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"skill-progress\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u6280\\u80FD\\u8FDB\\u5EA6\\u56FE\\u8868\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"charts-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-item\",\n        children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n          width: \"100%\",\n          height: 300,\n          children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: pieChartRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 137,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-item\",\n        children: /*#__PURE__*/_jsxDEV(ResponsiveContainer, {\n          width: \"100%\",\n          height: 300,\n          children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n            ref: barChartRef\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 132,\n    columnNumber: 5\n  }, this);\n};\n_s(SkillProgress, \"eSNBOq+vC5lklBRweID0n7KMQmA=\");\n_c = SkillProgress;\nexport default SkillProgress;\nvar _c;\n$RefreshReg$(_c, \"SkillProgress\");","map":{"version":3,"names":["React","useContext","useEffect","useRef","Chart","registerables","ResponsiveContainer","SkillContext","jsxDEV","_jsxDEV","register","SkillProgress","_s","skills","getSkillProgress","pieChartRef","barChartRef","pieChartInstance","barChartInstance","destroyCharts","current","destroy","length","pieData","labels","map","skill","name","datasets","data","hoursPracticed","backgroundColor","borderWidth","type","options","responsive","plugins","legend","position","title","display","text","barData","label","targetHours","order","scales","y","beginAtZero","x","className","children","fileName","_jsxFileName","lineNumber","columnNumber","width","height","ref","_c","$RefreshReg$"],"sources":["/Users/handsomeboy/Documents/playplay/10k_hours/10k_hours_app/src/components/SkillProgress.js"],"sourcesContent":["import React, { useContext, useEffect, useRef } from 'react';\nimport { Chart, registerables } from 'chart.js';\nimport { ResponsiveContainer } from 'recharts';\nimport SkillContext from '../contexts/SkillContext';\nimport './SkillProgress.css';\n\n// 注册所有必要的组件\nChart.register(...registerables);\n\nconst SkillProgress = () => {\n  const { skills, getSkillProgress } = useContext(SkillContext);\n  const pieChartRef = useRef(null);\n  const barChartRef = useRef(null);\n  const pieChartInstance = useRef(null);\n  const barChartInstance = useRef(null);\n\n  // 销毁旧图表实例\n  const destroyCharts = () => {\n    if (pieChartInstance.current) {\n      pieChartInstance.current.destroy();\n      pieChartInstance.current = null;\n    }\n    if (barChartInstance.current) {\n      barChartInstance.current.destroy();\n      barChartInstance.current = null;\n    }\n  };\n\n  // 创建或更新图表\n  useEffect(() => {\n    // 销毁旧图表\n    destroyCharts();\n\n    if (skills.length === 0) return;\n\n    // 创建饼图数据\n    const pieData = {\n      labels: skills.map(skill => skill.name),\n      datasets: [{\n        data: skills.map(skill => skill.hoursPracticed),\n        backgroundColor: [\n          '#61dafb', '#21a1f1', '#7b1fa2', '#e1bee7',\n          '#388e3c', '#c8e6c9', '#ff6f00', '#ffecb3'\n        ],\n        borderWidth: 1\n      }]\n    };\n\n    // 创建饼图\n    if (pieChartRef.current) {\n      pieChartInstance.current = new Chart(pieChartRef.current, {\n        type: 'pie',\n        data: pieData,\n        options: {\n          responsive: true,\n          plugins: {\n            legend: {\n              position: 'right',\n            },\n            title: {\n              display: true,\n              text: '技能练习时间分布'\n            }\n          }\n        }\n      });\n    }\n\n    // 创建柱状图数据\n    const barData = {\n      labels: skills.map(skill => skill.name),\n      datasets: [{\n        label: '已练习小时数',\n        data: skills.map(skill => skill.hoursPracticed),\n        backgroundColor: '#61dafb',\n        borderWidth: 1\n      }, {\n        label: '目标小时数',\n        data: skills.map(skill => skill.targetHours),\n        backgroundColor: '#e0e0e0',\n        borderWidth: 1,\n        type: 'bar',\n        order: 2\n      }]\n    };\n\n    // 创建柱状图\n    if (barChartRef.current) {\n      barChartInstance.current = new Chart(barChartRef.current, {\n        type: 'bar',\n        data: barData,\n        options: {\n          responsive: true,\n          scales: {\n            y: {\n              beginAtZero: true,\n              title: {\n                display: true,\n                text: '小时数'\n              }\n            },\n            x: {\n              title: {\n                display: true,\n                text: '技能'\n              }\n            }\n          },\n          plugins: {\n            title: {\n              display: true,\n              text: '技能进度对比'\n            }\n          }\n        }\n      });\n    }\n\n    // 组件卸载时销毁图表\n    return () => destroyCharts();\n  }, [skills, getSkillProgress]);\n\n  if (skills.length === 0) {\n    return (\n      <div className=\"skill-progress empty\">\n        <p>暂无技能数据，添加技能并记录练习时间后即可查看图表</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"skill-progress\">\n      <h2>技能进度图表</h2>\n      <div className=\"charts-container\">\n        <div className=\"chart-item\">\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <canvas ref={pieChartRef}></canvas>\n          </ResponsiveContainer>\n        </div>\n        <div className=\"chart-item\">\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <canvas ref={barChartRef}></canvas>\n          </ResponsiveContainer>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SkillProgress;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}