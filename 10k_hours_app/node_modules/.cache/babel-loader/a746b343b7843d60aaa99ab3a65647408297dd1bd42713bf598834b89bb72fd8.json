{"ast":null,"code":"var _jsxFileName = \"/Users/handsomeboy/Documents/playplay/10k_hours/10k_hours_app/src/components/SkillProgress.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport { Chart, registerables } from 'chart.js';\nimport './SkillProgress.css';\n\n// 只注册一次Chart.js组件\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nChart.register(...registerables);\nconst SkillProgress = () => {\n  _s();\n  const pieChartRef = useRef(null);\n  const barChartRef = useRef(null);\n  const pieChartInstance = useRef(null);\n  const barChartInstance = useRef(null);\n\n  // 使用模拟数据\n  const skills = [{\n    id: '1',\n    name: '编程',\n    hoursPracticed: 500,\n    targetHours: 10000\n  }, {\n    id: '2',\n    name: '英语',\n    hoursPracticed: 1000,\n    targetHours: 10000\n  }, {\n    id: '3',\n    name: '吉他',\n    hoursPracticed: 200,\n    targetHours: 10000\n  }];\n  console.log('使用模拟数据:', skills);\n\n  // 销毁旧图表实例\n  const destroyCharts = () => {\n    if (pieChartInstance.current) {\n      pieChartInstance.current.destroy();\n      pieChartInstance.current = null;\n    }\n    if (barChartInstance.current) {\n      barChartInstance.current.destroy();\n      barChartInstance.current = null;\n    }\n  };\n\n  // 创建或更新图表\n  useEffect(() => {\n    // 销毁旧图表\n    destroyCharts();\n    if (skills.length === 0) {\n      console.log('没有技能数据，不创建图表');\n      return;\n    }\n    console.log('开始创建图表...');\n\n    // 等待DOM渲染完成后再创建图表\n    const timeoutId = setTimeout(() => {\n      // 创建饼图\n      if (pieChartRef.current) {\n        try {\n          pieChartInstance.current = new Chart(pieChartRef.current, {\n            type: 'pie',\n            data: {\n              labels: skills.map(skill => skill.name),\n              datasets: [{\n                data: skills.map(skill => skill.hoursPracticed),\n                backgroundColor: ['#61dafb', '#21a1f1', '#7b1fa2', '#e1bee7', '#388e3c', '#c8e6c9', '#ff6f00', '#ffecb3'],\n                borderWidth: 1\n              }]\n            },\n            options: {\n              responsive: true,\n              plugins: {\n                legend: {\n                  position: 'right'\n                },\n                title: {\n                  display: true,\n                  text: '技能练习时间分布'\n                }\n              }\n            }\n          });\n          console.log('饼图创建成功');\n        } catch (error) {\n          console.error('创建饼图时出错:', error);\n        }\n      }\n\n      // 创建柱状图\n      if (barChartRef.current) {\n        try {\n          barChartInstance.current = new Chart(barChartRef.current, {\n            type: 'bar',\n            data: {\n              labels: skills.map(skill => skill.name),\n              datasets: [{\n                label: '已练习小时数',\n                data: skills.map(skill => skill.hoursPracticed),\n                backgroundColor: '#61dafb',\n                borderWidth: 1\n              }, {\n                label: '目标小时数',\n                data: skills.map(skill => skill.targetHours),\n                backgroundColor: '#e0e0e0',\n                borderWidth: 1\n              }]\n            },\n            options: {\n              responsive: true,\n              scales: {\n                y: {\n                  beginAtZero: true,\n                  title: {\n                    display: true,\n                    text: '小时数'\n                  }\n                },\n                x: {\n                  title: {\n                    display: true,\n                    text: '技能'\n                  }\n                }\n              },\n              plugins: {\n                title: {\n                  display: true,\n                  text: '技能进度对比'\n                }\n              }\n            }\n          });\n          console.log('柱状图创建成功');\n        } catch (error) {\n          console.error('创建柱状图时出错:', error);\n        }\n      }\n    }, 100);\n\n    // 清理超时函数\n    return () => {\n      clearTimeout(timeoutId);\n      destroyCharts();\n    };\n  }, [skills]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"skill-progress\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\u6280\\u80FD\\u8FDB\\u5EA6\\u56FE\\u8868\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"charts-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-item\",\n        children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: pieChartRef,\n          width: \"400\",\n          height: \"300\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 147,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"chart-item\",\n        children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n          ref: barChartRef,\n          width: \"400\",\n          height: \"300\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 143,\n    columnNumber: 5\n  }, this);\n};\n_s(SkillProgress, \"faY4DLDBgiTlV3WE36iQ+fdDLCI=\");\n_c = SkillProgress;\nexport default SkillProgress;\nvar _c;\n$RefreshReg$(_c, \"SkillProgress\");","map":{"version":3,"names":["React","useEffect","useRef","Chart","registerables","jsxDEV","_jsxDEV","register","SkillProgress","_s","pieChartRef","barChartRef","pieChartInstance","barChartInstance","skills","id","name","hoursPracticed","targetHours","console","log","destroyCharts","current","destroy","length","timeoutId","setTimeout","type","data","labels","map","skill","datasets","backgroundColor","borderWidth","options","responsive","plugins","legend","position","title","display","text","error","label","scales","y","beginAtZero","x","clearTimeout","className","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","width","height","_c","$RefreshReg$"],"sources":["/Users/handsomeboy/Documents/playplay/10k_hours/10k_hours_app/src/components/SkillProgress.js"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { Chart, registerables } from 'chart.js';\nimport './SkillProgress.css';\n\n// 只注册一次Chart.js组件\nChart.register(...registerables);\n\nconst SkillProgress = () => {\n  const pieChartRef = useRef(null);\n  const barChartRef = useRef(null);\n  const pieChartInstance = useRef(null);\n  const barChartInstance = useRef(null);\n\n  // 使用模拟数据\n  const skills = [\n    { id: '1', name: '编程', hoursPracticed: 500, targetHours: 10000 },\n    { id: '2', name: '英语', hoursPracticed: 1000, targetHours: 10000 },\n    { id: '3', name: '吉他', hoursPracticed: 200, targetHours: 10000 }\n  ];\n\n  console.log('使用模拟数据:', skills);\n\n  // 销毁旧图表实例\n  const destroyCharts = () => {\n    if (pieChartInstance.current) {\n      pieChartInstance.current.destroy();\n      pieChartInstance.current = null;\n    }\n    if (barChartInstance.current) {\n      barChartInstance.current.destroy();\n      barChartInstance.current = null;\n    }\n  };\n\n  // 创建或更新图表\n  useEffect(() => {\n    // 销毁旧图表\n    destroyCharts();\n\n    if (skills.length === 0) {\n      console.log('没有技能数据，不创建图表');\n      return;\n    }\n\n    console.log('开始创建图表...');\n\n    // 等待DOM渲染完成后再创建图表\n    const timeoutId = setTimeout(() => {\n      // 创建饼图\n      if (pieChartRef.current) {\n        try {\n          pieChartInstance.current = new Chart(pieChartRef.current, {\n            type: 'pie',\n            data: {\n              labels: skills.map(skill => skill.name),\n              datasets: [{\n                data: skills.map(skill => skill.hoursPracticed),\n                backgroundColor: [\n                  '#61dafb', '#21a1f1', '#7b1fa2', '#e1bee7',\n                  '#388e3c', '#c8e6c9', '#ff6f00', '#ffecb3'\n                ],\n                borderWidth: 1\n              }]\n            },\n            options: {\n              responsive: true,\n              plugins: {\n                legend: {\n                  position: 'right',\n                },\n                title: {\n                  display: true,\n                  text: '技能练习时间分布'\n                }\n              }\n            }\n          });\n          console.log('饼图创建成功');\n        } catch (error) {\n          console.error('创建饼图时出错:', error);\n        }\n      }\n\n      // 创建柱状图\n      if (barChartRef.current) {\n        try {\n          barChartInstance.current = new Chart(barChartRef.current, {\n            type: 'bar',\n            data: {\n              labels: skills.map(skill => skill.name),\n              datasets: [{\n                label: '已练习小时数',\n                data: skills.map(skill => skill.hoursPracticed),\n                backgroundColor: '#61dafb',\n                borderWidth: 1\n              }, {\n                label: '目标小时数',\n                data: skills.map(skill => skill.targetHours),\n                backgroundColor: '#e0e0e0',\n                borderWidth: 1\n              }]\n            },\n            options: {\n              responsive: true,\n              scales: {\n                y: {\n                  beginAtZero: true,\n                  title: {\n                    display: true,\n                    text: '小时数'\n                  }\n                },\n                x: {\n                  title: {\n                    display: true,\n                    text: '技能'\n                  }\n                }\n              },\n              plugins: {\n                title: {\n                  display: true,\n                  text: '技能进度对比'\n                }\n              }\n            }\n          });\n          console.log('柱状图创建成功');\n        } catch (error) {\n          console.error('创建柱状图时出错:', error);\n        }\n      }\n    }, 100);\n\n    // 清理超时函数\n    return () => {\n      clearTimeout(timeoutId);\n      destroyCharts();\n    };\n  }, [skills]);\n\n  return (\n    <div className=\"skill-progress\">\n      <h2>技能进度图表</h2>\n      <div className=\"charts-container\">\n        <div className=\"chart-item\">\n          <canvas ref={pieChartRef} width=\"400\" height=\"300\"></canvas>\n        </div>\n        <div className=\"chart-item\">\n          <canvas ref={barChartRef} width=\"400\" height=\"300\"></canvas>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default SkillProgress;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}