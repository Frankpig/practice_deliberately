<!-- skillList.wxml -->
<view class="container {{darkModeClass}}" style="background-color: var(--background-color); min-height: 100vh; padding: 30rpx;">
  <h2 style="color: var(--text-color);">我的技能</h2>
  
  <view wx:if="{{skills.length === 0}}" class="empty" style="text-align: center; padding: 60rpx 20rpx; color: var(--secondary-text-color);">
    <p>暂无技能，请添加新技能开始练习记录</p>
  </view>
  
  <view wx:else class="skill-cards" style="display: flex; flex-direction: column; gap: 20rpx;">
    <block wx:for="{{skills}}" wx:key="id">
      <view class="skill-card" data-skill-id="{{item.id}}" data-skill-name="{{item.name}}" style="background-color: var(--card-background-color); padding: 30rpx; border-radius: 15rpx; box-shadow: var(--card-shadow);">
        <view class="skill-header" style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20rpx;">
          <h3 bindtap="onSkillTap" data-skill-id="{{item.id}}" data-skill-name="{{item.name}}" style="color: var(--text-color); margin: 0; cursor: pointer;">{{item.name}}</h3>
          <view style="display: flex; gap: 10rpx; align-items: center;">
            <span class="skill-stage" style="font-size: 24rpx; font-weight: bold; padding: 5rpx 15rpx; background-color: transparent; color: var(--text-color);">{{item.stage}}</span>
            <view bindtap="onDeleteSkill" data-skill-id="{{item.id}}" data-skill-name="{{item.name}}" style="width: 40rpx; height: 40rpx; background-color: white; color: #FF4D4F; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 32rpx; font-weight: bold; cursor: pointer; border: 1px solid #FF4D4F;">-</view>
          </view>
        </view>
        <view class="skill-progress" style="width: 100%;">
          <view class="progress-bar-container" style="width: 100%; height: 30rpx; background-color: var(--progress-bar-background); border-radius: 15rpx; overflow: hidden; margin-bottom: 10rpx;">
            <view class="progress-bar" style="height: 100%; width: {{item.progressPercentage}}%; background: var(--progress-bar-gradient); transition: width 0.3s ease;"></view>
          </view>
          <text class="progress-text" style="font-size: 24rpx; color: var(--secondary-text-color);">
            <!-- 直接显示预计算的百分比值 -->
            {{item.hoursPracticed}} / {{item.targetHours}} 小时
            
            <!-- 使用预计算的百分比 -->
            <text style="font-weight: bold; color: var(--primary-color);"> 进度: {{item.progressPercentage}}%</text>
          </text>
        </view>
      </view>
    </block>
  </view>
</view>